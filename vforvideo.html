<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Idioms in Orbit üåå</title>
  <style>
    html, body {
      height: 100%;
      width: 100%;
      margin: 0;
      padding: 0;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: radial-gradient(ellipse at bottom, #0b0c1b 0%, #000000 100%);
      color: white;
      text-align: center;
      display: flex;
      justify-content: center;
      align-items: center;
    }
    .container {
      display: flex;
      flex-direction: column;
      justify-content: flex-start;
      align-items: center;
      width: 100vw;
      height: 100vh;
      padding: 1rem;
      box-sizing: border-box;
      background: rgba(255, 255, 255, 0.04);
      overflow-y: auto;
    }
    #nameForm {
      margin-bottom: 1.5rem;
      width: 100%;
      max-width: 600px;
      display: flex;
      justify-content: center;
      gap: 0.5rem;
    }
    #nameInput {
      flex-grow: 1;
      padding: 0.5rem;
      font-size: 1rem;
      border-radius: 5px;
      border: none;
      max-width: 400px;
    }
    button {
      padding: 1rem;
      border: none;
      border-radius: 10px;
      font-size: 1rem;
      cursor: pointer;
      background-color: #1f1f2e;
      color: white;
      transition: background-color 0.3s ease;
      width: 100%;
      max-width: 600px;
      margin: 0.5rem 0;
    }
    button:hover:not(:disabled) {
      background-color: #343454;
    }
    button:disabled {
      background-color: #555666;
      cursor: not-allowed;
    }
    .question {
      font-size: 1.25rem;
      margin-bottom: 1rem;
      max-width: 700px;
      word-wrap: break-word;
    }
    .options {
      display: flex;
      flex-direction: column;
      gap: 1rem;
      width: 100%;
      max-width: 700px;
      position: relative;
    }
    #timer, #wrongCounter, #progressTracker, #scoreCard {
      font-size: 1.1rem;
      margin: 0.5rem 0;
      color: #ffd700;
      max-width: 700px;
      width: 100%;
      text-align: center;
    }
    #restartBtn {
      margin-top: 2rem;
      max-width: 600px;
      width: 100%;
    }
    #videoPlayer {
      max-width: 100%;
      aspect-ratio: 16/9;
      margin-bottom: 1rem;
      border-radius: 10px;
    }
    .long-answer-area {
      display: flex;
      flex-direction: column;
      gap: 0.5rem;
      align-items: stretch;
    }
    .keystroke-bar {
      display: flex;
      justify-content: space-between;
      align-items: center;
      font-size: 0.95rem;
      color: #ccc;
    }
    .progress-track {
      width: 100%;
      height: 12px;
      background: rgba(255,255,255,0.08);
      border-radius: 8px;
      overflow: hidden;
    }
    .progress-fill {
      height: 100%;
      width: 0%;
      background: linear-gradient(90deg, #4caf50, #8bc34a);
      transition: width 0.15s linear;
    }
    textarea {
      min-height: 160px;
      padding: 0.75rem;
      font-size: 1rem;
      border-radius: 8px;
      border: none;
      resize: vertical;
    }
    .hint {
      font-size: 0.9rem;
      color: #bbb;
    }
  </style>
</head>
<body>
  <div class="container" id="quizContainer">
    <div id="nameForm">
      <input type="text" id="nameInput" placeholder="Enter your name" autocomplete="off" />
      <button onclick="beginQuiz()">Start Quiz</button>
    </div>

    <div id="quizContent" style="display:none;">
      <div id="timer">‚è≥ Time: 0s</div>
      <div id="wrongCounter">‚ùå Wrong Attempts: 0</div>
      <div id="progressTracker">üìç Question 1 of 5</div>
      <div class="question" id="question">Loading...</div>
      <div class="options" id="options"></div>
      <div id="scoreCard"></div>
      <button id="restartBtn" style="display: none;">Restart</button>
    </div>
  </div>

  <script src="https://www.youtube.com/iframe_api"></script>

  <audio id="correctSound" src="https://freesound.org/data/previews/270/270331_5121236-lq.wav" preload="auto"></audio>
  <audio id="wrongSound" src="https://freesound.org/data/previews/211/211758_1467003-lq.wav" preload="auto"></audio>

  <script>
    const quizData = [
{
  type: 'mcq',
  videoId: "FRIUhO4MdGU",
  options: [
    "It makes a loud ringing noise like a bell.",
    "It sounds appealing or pleasant when said out loud.",
    "It refers to wearing a beautiful metal ring.",
    "It is about shouting loudly to get attention."
  ],
  correct: 1,
  example: `"Iron Man! That‚Äôs kind of catchy! It's got a nice ring to it."`
},

       {
  type: 'mcq',
  videoId: "FRIUhO4MdGU",
  options: [
    "It is completely wrong in every way.",
    "It is not precise or correct according to specific facts or technical details.",
    "It is technically difficult to understand.",
    "It is an opinion based on feelings."
  ],
  correct: 1,
  example: `"I mean it's not technically accurate ‚Äî this suit's a gold titanium alloy."`
},
{
  type: 'mcq',
  videoId: "FRIUhO4MdGU",
  options: [
    "Images that are hard to see.",
    "Pictures that are very colorful.",
    "Mental pictures or sensations that strongly bring a feeling, memory, or image to mind.",
    "Photographs taken with special cameras."
  ],
  correct: 2,
  example: `"But it's kind of evocative ‚Äî the imagery, anyway."`
},
{
  type: 'mcq',
  videoId: "FRIUhO4MdGU",
  options: [
    "A type of boat.",
    "A claim or evidence that one was elsewhere when an alleged act occurred.",
    "A secret code word.",
    "A legal contract."
  ],
  correct: 1,
  example: `"Is that your alibi? That you were on your yacht."`
},
{
  type: 'mcq',
  videoId: "FRIUhO4MdGU",
  options: [
    "Angry declarations.",
    "Formal declarations made under oath.",
    "Casual conversations.",
    "Jokes told at a party."
  ],
  correct: 1,
  example: `"And sworn statements from 50 of your guests."`
},
{
  type: 'mcq',
  videoId: "FRIUhO4MdGU",
  options: [
    "Someone is literally touching something.",
    "A situation or problem is being dealt with or taken care of.",
    "Something is difficult to lift.",
    "Someone is holding a meeting."
  ],
  correct: 1,
  example: `"That's being handled. He's on vacation."`
},
{
  type: 'mcq',
  videoId: "FRIUhO4MdGU",
  options: [
    "The problem will be literally placed behind you.",
    "A difficult or problematic situation will soon be over and forgotten.",
    "You will be followed.",
    "The problem will stay in front of you."
  ],
  correct: 1,
  example: `"And soon this will all be behind you."`
},
{
  type: 'mcq',
  videoId: "FRIUhO4MdGU",
  options: [
    "Let's go to a performance.",
    "Let's start or get going.",
    "Let's put a show on a vehicle.",
    "Let's build a theater."
  ],
  correct: 1,
  example: `"Let's get this show on the road."`
},
{
  type: 'mcq',
  videoId: "FRIUhO4MdGU",
  options: [
    "Direct evidence.",
    "Forming a theory or conjecture about a subject without firm evidence.",
    "A type of mirror.",
    "A scientific law."
  ],
  correct: 1,
  example: `"There's been speculation that I was involved in the events"`
},
{
  type: 'mcq',
  videoId: "FRIUhO4MdGU",
  options: [
    "I have been to many rodeos.",
    "I am experienced in this type of situation and know how to handle it.",
    "I do not enjoy rodeos.",
    "I‚Äôm unfamiliar with rodeos."
  ],
  correct: 1,
  example: `"This isn't my first rodeo, Mr. Stark."`
},
      {
        type: 'long',
        videoId: "wKn1R6fekk4",
        prompt: "Can someone be free and responsible at the same time? Why did Tony confess, ‚ÄúI am Iron Man,‚Äù even though it was risky? What does honesty have to do with freedom? Why or why not?",
        maxWords: 200,
        example: "Use Tony Stark or your own example."
      },
{
  type: 'mcq',
  videoId: "P8Rm-9a-WOc",
  options: [
    "A person‚Äôs reputation can stay the same forever.",
    "A person can start as a hero but be seen as a villain over time.",
    "People never change how they are seen.",
    "Heroes always win without problems."
  ],
  correct: 1,
  example: `"You either die a hero, or you live long enough to see yourself become the villain."`
},
{
  type: 'mcq',
  videoId: "P8Rm-9a-WOc",
  options: [
    "Sometimes doing the right thing means being misunderstood or judged.",
    "Doing the right thing always makes everyone happy.",
    "Right actions never cause problems.",
    "Good actions are always easy."
  ],
  correct: 0,
  example: `"They'll hunt you. You'll hunt me."`
},
{
  type: 'mcq',
  videoId: "P8Rm-9a-WOc",
  options: [
    "To hide or ignore a problem or difficulty in the hope that it will be forgotten.",
    "To clean the floor by pushing dirt under the carpet.",
    "To discuss a problem openly and find a solution.",
    "To remove a carpet from a room."
  ],
  correct: 0,
  example: `"Five dead, two of them cops... you can't sweep that up (Idiom: Sweep it under the carpet)."`
},
   {
        type: 'long',
        videoId: "P8Rm-9a-WOc",
        prompt: "Is identity who you really are, or how others see you? Can these be different? Can society work without small lies or ‚Äúwhite lies‚Äù? Are some lies necessary to keep peace and trust?",
        maxWords: 200,
        example: "Use Batman or your own example."
      },
{
  type: 'mcq',
  videoId: "Ho6t683GazQ",
  options: [
    "A guess made without much information; a wild guess.",
    "A clear and well-informed decision.",
    "A detailed and careful plan.",
    "An expert opinion based on facts."
  ],
  correct: 0,
  example: `"Shot in the dark. Good one, though."`
},
{
  type: 'mcq',
  videoId: "Ho6t683GazQ",
  options: [
    "Feeling confident and skilled in a situation.",
    "Not having the skill or knowledge needed to handle a situation.",
    "Being tired but continuing to work hard.",
    "Being physically strong and healthy."
  ],
  correct: 1,
  example: `"When the police are out of their depth, which is always, they consult me."`
},
{
  type: 'mcq',
  videoId: "Ho6t683GazQ",
  options: [
    "The way someone stands or moves that shows their personality or mood.",
    "Holding a physical object tightly.",
    "Keeping a secret from someone.",
    "Ignoring a problem."
  ],
  correct: 0,
  example: `"Your haircut, the way you hold yourself, says military."`
},
{
  type: 'mcq',
  videoId: "Ho6t683GazQ",
  question: "If your teacher played this in class, what activity would they give the students to teach them observation?",
  options: [
    "Note to self: Never let Sherlock touch my phone.",
    "Enter Zen mode and forget what your phone looks like.",
    "Swap your locked phones with a partner for 2 minutes and see if they can guess five things about you, just by looking, without unlocking it!",
    "So this is why they say there‚Äôs no such thing as privacy with a phone?",
    "Change your username on your chess.com or lichess account to sherlocKING."
  ],
  correct: 2,
  example: "Sherlock carefully studies John‚Äôs phone to learn many details about him without unlocking it."
},

   {
        type: 'long',
        videoId: "Ho6t683GazQ",
        prompt: "Can the things we use daily reveal our secrets to someone observant enough? Are the objects we carry extensions of our personality, waiting to be decoded?",
        maxWords: 200,
        example: "Channel your inner Sherlock"
      },
{
  type: 'mcq',
  videoId: "3lZy3teNY84",
  question: "What does 'unpredictable' mean?",
  options: [
    "Something you cannot guess or know ahead of time.",
    "Something easy to understand.",
    "Something that always happens the same way.",
    "Something very slow."
  ],
  correct: 0,
  example: "\"The water droplet's path is unpredictable each time.\""
},
{
  type: 'mcq',
  videoId: "3lZy3teNY84",
  question: "In this scene, what does 'complex system' mean?",
  options: [
    "A simple machine.",
  "A system made of many parts that interact in complicated ways.",  
    "A park with only one dinosaur.",
    "A building with many rooms."
  ],
  correct: 1,
  example: "\"Jurassic Park is a complex system that is hard to control.\""
},
{
  type: 'mcq',
  videoId: "3lZy3teNY84",
  question: "What does 'Things get out of hand' mean?",
  options: [
    "A situation becomes difficult to control.",
    "You lose your hands.",
    "Everything is well managed.",
    "People wash their hands."
  ],
  correct: 0,
  example: "\"When the dinosaurs escape, things get out of hand.\""
},

   {
        type: 'long',
        videoId: "Ho6t683GazQ",
        prompt: "Have you ever had a moment where one tiny choice changed everything?
Can small changes really lead to huge consequences in life?",
        maxWords: 200,
        example: "Order and Chaos"
      },
{
  type: 'mcq',
  videoId: "05i77ZbYoFs",
  question: "What does the video primarily convey about Severus Snape's character? Choose the INCORRECT option.",
  options: [
    "He is highly sarcastic and uses sharp wit in his interactions.",
    "He demonstrates an authoritative and strict teaching style.",
    "He often uses belittling and dismissive language towards students.",
    "He has a dark, cynical sense of humor with mocking comments.",
    "He shows expert knowledge of complex and manipulative magic.",
    "He consistently offers encouraging words and supportive guidance."
  ],
  correct: 5,
  example: "\"Turn to page 394!\" Snape demands with icy authority."
},
{
  type: 'mcq',
  videoId: "05i77ZbYoFs",
  question: "What does the phrase 'put someone on the spot' mean, like Snape often does to students?",
  options: [
    "To challenge or pressure someone unexpectedly.",
    "To give someone a comfortable chair.",
    "To send someone outside for a break.",
    "To cast a hiding spell on someone."
  ],
  correct: 0,
  example: "Snape put Harry Potter on the spot by asking a difficult question."
},
{
  type: 'mcq',
  videoId: "05i77ZbYoFs",
  question: "What does the phrase 'sharp tongue' mean, like Snape‚Äôs way of speaking?",
  options: [
    "Someone who speaks in a very direct, often harsh or critical way.",
    "A magical tongue that can cut objects.",
    "A wizard who loves to eat spicy food.",
    "A potion ingredient."
  ],
  correct: 0,
  example: "Snape‚Äôs sharp tongue left many students feeling nervous."
},
{
  type: 'mcq',
  videoId: "05i77ZbYoFs",
  question: "What does the idiom 'walking on thin ice' mean, which could describe how students feel around Snape?",
  options: [
    "Taking risks that could lead to trouble or punishment.",
    "Gliding on frozen water with ease.",
    "Practicing a new spell carefully.",
    "Dancing during a Hogwarts party."
  ],
  correct: 0,
  example: "Students knew they were walking on thin ice when Snape was watching."
},
   {
        type: 'long',
        videoId: "05i77ZbYoFs",
        prompt: "Is it better to teach through fear or through kindness? Is it still teaching if the lesson is only understood years later?",
        maxWords: 200,
        example: "Mischief Managed. Reflect on your experiences."
      },
{
  type: 'mcq',
  videoId: "9esCA8_EPeY",
  question: "What does 'mentor' mean?",
  options: [
    "An experienced and trusted adviser or teacher.",
    "A person who competes against you.",
    "A funny sidekick or friend.",
    "Someone who ignores your problems."
  ],
  correct: 0,
  example: ""
},
 {
        type: 'long',
        videoId: "9esCA8_EPeY",
        prompt: "If you‚Äôre only confident when you have something (like the 'suit' in the clip or branded clothes, shoes, bags in real life), is it really you who‚Äôs confident?",
        maxWords: 200,
        example: "Do you learn more when someone helps you or when you figure it out yourself?"
      },
{
  type: 'mcq',
  videoId: "CBqlDWHkdHk",
  question: "What does the phrase 'tie herself into knots' mean in this context?",
  options: [
    "To become physically tangled in ropes.",
    "To feel extremely confused, stressed, or anxious trying to please others.",
    "To learn how to tie different types of knots.",
    "To win a game by tying the score."
  ],
  correct: 1,
  example: "She‚Äôs tying herself into knots trying to be perfect for everyone."
},
{
  type: 'mcq',
  videoId: "CBqlDWHkdHk",
  question: "What does it mean to be 'crass' as used in 'you can‚Äôt ask for money because that‚Äôs crass'?",
  options: [
    "Rude or lacking sensitivity or manners.",
    "Extremely polite and kind.",
    "Very rich and powerful.",
    "Extremely funny or silly."
  ],
  correct: 0,
  example: "Asking for money directly is seen as crass in some situations."
},
{
  type: 'mcq',
  videoId: "CBqlDWHkdHk",
  question: "In the phrase 'the system is rigged,' what does 'rigged' mean?",
  options: [
    "Unfairly set up to favour some people and harm others.",
    "Properly fixed and repaired.",
    "Fully loaded with equipment.",
    "Carefully cleaned and organized."
  ],
  correct: 0,
  example: "She says the system is rigged against women trying to succeed."
},
{
  type: 'mcq',
  videoId: "CBqlDWHkdHk",
  question: "What does 'fall down' mean here when it says 'never fall down'?",
  options: [
    "To literally trip and fall to the ground.",
    "To make mistakes or fail in life or work.",
    "To dance quickly.",
    "To jump high."
  ],
  correct: 1,
  example: "She feels pressure to never fall down or fail in anything she does."
},
{
  type: 'mcq',
  videoId: "CBqlDWHkdHk",
  question: "What does it mean to 'answer for someone's bad behavior' as in 'You have to answer for men's bad behavior'?",
  options: [
    "To take responsibility or be blamed for someone else's mistakes.",
    "To respond politely when someone says hello.",
    "To explain why you are late to class.",
    "To solve a puzzle together."
  ],
  correct: 0,
  example: "Women feel they have to answer for men‚Äôs bad behavior, which is unfair."
},
{
  type: 'mcq',
  videoId: "CBqlDWHkdHk",
  question: "What does 'never get out of line' mean?",
  options: [
    "Never behave badly or break the rules.",
    "Never leave a queue.",
    "Never speak loudly.",
    "Never cross the street."
  ],
  correct: 0,
  example: "She says women are told to never get out of line or cause trouble."
},
{
  type: 'mcq',
  videoId: "CBqlDWHkdHk",
  question: "What does 'walking a tightrope' mean?",
  options: [
    "Balancing carefully between difficult, conflicting demands.",
    "Wearing tight shoes that hurt your feet.",
    "Walking across a street quickly.",
    "Dancing on a rope in a circus."
  ],
  correct: 0,
  example: "She feels like she‚Äôs walking a tightrope, trying to meet everyone‚Äôs impossible expectations."
},
{
  type: 'mcq',
  videoId: "CBqlDWHkdHk",
  question: "What does it mean to 'carry the weight'?",
  options: [
    "To lift heavy objects at the gym.",
    "To bear a heavy burden or responsibility.",
    "To carry a suitcase while traveling.",
    "To wear a heavy coat in winter."
  ],
  correct: 1,
  example: "Women often carry the weight of many expectations in society."
},
{
  type: 'mcq',
  videoId: "CBqlDWHkdHk",
  question: "What does it mean to 'paint yourself into a corner'?",
  options: [
    "To decorate your room with bright colors.",
    "To create a situation with no easy way out.",
    "To clean up a messy corner in your house.",
    "To draw a picture of a corner."
  ],
  correct: 1,
  example: "By saying yes to everything, she painted herself into a corner with no free time."
},
{
  type: 'mcq',
  videoId: "CBqlDWHkdHk",
  question: "What does 'burn the candle at both ends' mean?",
  options: [
    "To work too hard and risk burning out.",
    "To waste candles quickly by leaving them on.",
    "To light candles on both sides of a room.",
    "To celebrate with candles all day."
  ],
  correct: 0,
  example: "She‚Äôs been burning the candle at both ends trying to balance work and family."
},
{
  type: 'mcq',
  videoId: "CBqlDWHkdHk",
  question: "What is 'hit a glass ceiling'?",
  options: [
    "To break a window accidentally.",
    "To climb a glass staircase.",
    "To face an invisible barrier stopping progress, especially for women at work.",
    "To reach the top floor of a building."
  ],
  correct: 2,
  example: "Many women feel they hit a glass ceiling in their careers and can‚Äôt move up."
},
{
  type: 'mcq',
  videoId: "CBqlDWHkdHk",
  question: "What does 'walking on eggshells' mean?",
  options: [
    "Walking quickly to catch a bus.",
    "Dancing with broken eggshells.",
    "Being very careful not to upset or offend someone.",
    "Walking barefoot on a rough surface."
  ],
  correct: 2,
  example: "She feels like she‚Äôs always walking on eggshells around her boss."
},
{
        type: 'long',
        videoId: "9esCA8_EPeY",
        prompt: "Do you think people expect too much from you and understand you too little?",
        maxWords: 200,
        example: "Do you think it is possible to meet everyone‚Äôs expectations without losing your own identity?"
      },
{
  type: 'mcq',
  videoId: "c8pTIa0JQtM",
  question: "What does 'call out' mean?",
  options: [
    "To cancel a scheduled event.",
    "To shout or speak loudly to get someone's attention.",
    "To end a conversation abruptly.",
    "To invite someone to join a team."
  ],
  correct: 1,
  example: "Peter Quill: 'Hey, you're makin' him nervous!' ‚Äî Peter is calling out Rocket‚Äôs frustration."
},
{
  type: 'mcq',
  videoId: "c8pTIa0JQtM",
  question: "What does 'call in' mean?",
  options: [
    "To end a phone call.",
    "To request help or assistance in a difficult situation.",
    "To ask for permission to leave.",
    "To make a reservation."
  ],
  correct: 1,
  example: "Rocket Raccoon: 'Does anyone have any tape out there?!' ‚Äî He is calling in for help."
},
{
  type: 'mcq',
  videoId: "c8pTIa0JQtM",
  question: "What does 'call for' mean?",
  options: [
    "To require or demand something.",
    "To visit someone briefly.",
    "To cancel an appointment.",
    "To make a phone call."
  ],
  correct: 0,
  example: "Rocket: 'Now, whatever you do, don't push this button, because that will set off the bomb immediately.' ‚Äî The situation calls for careful action."
},
{
  type: 'mcq',
  videoId: "c8pTIa0JQtM",
  question: "What does 'call off' mean?",
  options: [
    "To summon someone to a meeting.",
    "To cancel something planned.",
    "To make a phone call.",
    "To end a relationship."
  ],
  correct: 1,
  example: "Not in the scene, but if the plan was aborted because of danger, they would have to call it off."
},
{
  type: 'mcq',
  videoId: "c8pTIa0JQtM",
  question: "What does 'call up' mean?",
  options: [
    "To phone someone.",
    "To bring something to mind.",
    "To summon someone to join the military.",
    "All of the above."
  ],
  correct: 3,
  example: "Peter Quill is trying to call up tape by asking everyone: 'Do you have any tape?'"
},
{
  type: 'mcq',
  videoId: "c8pTIa0JQtM",
  question: "What does 'call it a day' mean?",
  options: [
    "To stop working for the day.",
    "To make a phone call.",
    "To end a relationship.",
    "To visit someone briefly."
  ],
  correct: 0,
  example: "After all the chaos, they probably wanted to call it a day."
},
{
  type: 'mcq',
  videoId: "c8pTIa0JQtM",
  question: "What does 'call the shots' mean?",
  options: [
    "To take photographs.",
    "To be in control or make decisions.",
    "To make a phone call.",
    "To visit someone briefly."
  ],
  correct: 1,
  example: "Rocket clearly calls the shots when he says: 'Alright, first you flip this switch, then this one...'"
},
{
  type: 'mcq',
  videoId: "c8pTIa0JQtM",
  question: "What does 'call someone names' mean?",
  options: [
    "To insult or tease someone.",
    "To make a phone call.",
    "To visit someone briefly.",
    "To give someone a nickname."
  ],
  correct: 0,
  example: "Rocket often calls Peter names in the series, like when he gets frustrated."
},
{
  type: 'mcq',
  videoId: "c8pTIa0JQtM",
  question: "What does 'call someone's bluff' mean?",
  options: [
    "To insult someone.",
    "To challenge someone to prove their claim.",
    "To make a phone call.",
    "To visit someone briefly."
  ],
  correct: 1,
  example: "Rocket challenges Groot‚Äôs understanding by basically calling his bluff: 'No! That's exactly what you just said. How's that even possible?!'"
},
{
        type: 'long',
        videoId: "c8pTIa0JQtM",
        prompt: "Those who speak fluently often get noticed first. Do you think language is the only way to measure intelligence? If yes, why. If not, why not?",
        maxWords: 200,
        example: "Do you learn more when someone helps you or when you figure it out yourself?"
      },
{
        type: 'long',
        videoId: "c8pTIa0JQtM",
        prompt: "Rocket pretends not to care, but risks everything for his team. Do you think action is a better proof of character than words?",
        maxWords: 200,
        example: "Do you learn more when someone helps you or when you figure it out yourself?"
      },
{
  type: 'mcq',
  videoId: "wKn1R6fekk4",
  question: "What does 'vox populi' mean?",
  options: [
    "Voice of the people, the collective opinion that V represents.",
    "Voice of the government, the official statements made by rulers.",
    "Voice of the media, news and reporting from newspapers or TV.",
    "Voice of the elite, opinions of the powerful few."
  ],
  correct: 0,
  example: "V says: 'This visage, no mere veneer of vanity, is a vestige of the vox populi.'"
},

    ];

    let current = 0, correctCount = 0, totalWrongGuesses = 0, startTime, timerInterval;
    let guessesPerQuestion = {}, playerName = "", player = null;
    let answers = [];

    // Paste-block
    function preventClipboard(e) { e.preventDefault(); return false; }
    document.addEventListener('paste', preventClipboard);
    document.addEventListener('copy', preventClipboard);
    document.addEventListener('cut', preventClipboard);
    document.addEventListener('drop', preventClipboard);
    document.addEventListener('beforeinput', (e) => {
      if (/paste|insertFromDrop/i.test(e.inputType)) e.preventDefault();
    });
    document.addEventListener('contextmenu', e => e.preventDefault());
    document.addEventListener('keydown', e => {
      if ((e.ctrlKey || e.metaKey) && e.key.toLowerCase() === 'v') e.preventDefault();
    });

    function beginQuiz() {
      const nameInput = document.getElementById('nameInput');
      if (!nameInput.value.trim()) { alert('Please enter your name!'); return; }
      playerName = nameInput.value.trim();
      document.getElementById('nameForm').style.display = 'none';
      document.getElementById('quizContent').style.display = 'block';
      startTime = Date.now();
      startQuiz();
      startTimer();
    }

    function startQuiz() {
      current = 0; correctCount = 0; totalWrongGuesses = 0; guessesPerQuestion = {}; answers = [];
      document.getElementById('timer').innerText = '‚è≥ Time: 0s';
      document.getElementById('wrongCounter').innerText = `‚ùå Wrong Attempts: 0`;
      document.getElementById('scoreCard').innerHTML = '';
      document.getElementById('restartBtn').style.display = 'none';
      loadQuestion();
    }

    function loadQuestion() {
      if (current >= quizData.length) return showScore();
      const data = quizData[current];
      if (data.type === 'long') loadLongQuestion(data);
      else loadMCQQuestion(data);
    }

    function loadMCQQuestion(data) {
      guessesPerQuestion[current] = 0;
      answers[current] = { type: 'mcq', question: data.example, correct: data.options[data.correct], answer: null };
      document.getElementById('question').innerHTML = `<em>Example: ${data.example}</em>`;
      document.getElementById('progressTracker').innerText = `üìç Question ${current + 1} of ${quizData.length}`;
      const optionsEl = document.getElementById('options');
      optionsEl.innerHTML = `<div id="videoPlayer"></div>`;
      data.options.forEach(opt => {
        const btn = document.createElement('button');
        btn.innerText = opt;
        btn.onclick = () => handleMCQAnswer(btn, data.options[data.correct]);
        optionsEl.appendChild(btn);
      });
      if (player) { try { player.destroy(); } catch(e){} }
      player = new YT.Player('videoPlayer', { videoId: data.videoId });
    }

    function loadLongQuestion(data) {
      guessesPerQuestion[current] = 0;
      answers[current] = { type: 'long', question: data.prompt, correct: null, answer: null };
      document.getElementById('question').innerText = data.prompt;
      document.getElementById('progressTracker').innerText = `‚úçÔ∏è Long answer ${current + 1} of ${quizData.length}`;
      const optionsEl = document.getElementById('options');
      optionsEl.innerHTML = `<div id="videoPlayer"></div>`;
      const longArea = document.createElement('div');
      longArea.className = 'long-answer-area';
      const textarea = document.createElement('textarea');
      textarea.setAttribute('placeholder', `Write up to ${data.maxWords} words...`);

      // Anti-paste on textarea
      let lastValue = '';
      textarea.addEventListener('input', () => {
        const diff = textarea.value.length - lastValue.length;
        if (diff > 1) { textarea.value = lastValue; return; }
        lastValue = textarea.value;
      });
      textarea.addEventListener('beforeinput', e => {
        if (/paste|insertFromDrop/i.test(e.inputType)) e.preventDefault();
      });

      let keystrokes = 0;
      const ksDiv = document.createElement('div');
      ksDiv.className = 'keystroke-bar';
      ksDiv.innerHTML = `<span id='keystrokes'>Keystrokes: 0</span>
                         <span id='wordCount' class='hint'>0 / ${data.maxWords} words</span>`;

      const progressTrack = document.createElement('div');
      progressTrack.className = 'progress-track';
      const progressFill = document.createElement('div');
      progressFill.className = 'progress-fill';
      progressTrack.appendChild(progressFill);

      textarea.addEventListener('keydown', e => {
        if (e.key.length === 1 || e.key === 'Backspace' || e.key === 'Enter' || e.key === 'Delete') {
          keystrokes++;
          ksDiv.querySelector('#keystrokes').innerText = `Keystrokes: ${keystrokes}`;
        }
      });

      textarea.addEventListener('input', () => {
        let words = textarea.value.trim().split(/\s+/).filter(Boolean).length;
        if (words > data.maxWords) {
          textarea.value = textarea.value.trim().split(/\s+/).slice(0, data.maxWords).join(' ');
          words = data.maxWords;
        }
        ksDiv.querySelector('#wordCount').innerText = `${words} / ${data.maxWords} words`;
        progressFill.style.width = Math.min(100, (words / data.maxWords) * 100) + '%';
      });

      const submitBtn = document.createElement('button');
      submitBtn.innerText = 'Submit Answer';
      submitBtn.onclick = () => submitLongAnswer(textarea.value, data);

      longArea.append(textarea, ksDiv, progressTrack, submitBtn);
      optionsEl.appendChild(longArea);

      if (player) { try { player.destroy(); } catch(e){} }
      player = new YT.Player('videoPlayer', { videoId: data.videoId });
    }

    function handleMCQAnswer(btn, correct) {
      guessesPerQuestion[current]++;
      answers[current].answer = btn.innerText;
      if (btn.innerText === correct) {
        correctCount++;
        btn.style.backgroundColor = 'green';
        document.getElementById('correctSound').play();
        setTimeout(() => { current++; loadQuestion(); }, 500);
      } else {
        totalWrongGuesses++;
        document.getElementById('wrongCounter').innerText = `‚ùå Wrong Attempts: ${totalWrongGuesses}`;
        btn.style.backgroundColor = 'red';
        document.getElementById('wrongSound').play();
        setTimeout(() => { btn.style.backgroundColor = ''; }, 500);
      }
    }

    function submitLongAnswer(text, data) {
      if (!text.trim()) { alert('Please write something!'); return; }
      answers[current].answer = text.trim();
      correctCount++;
      current++;
      loadQuestion();
    }

    function showScore() {
      clearInterval(timerInterval);

      // Send results to Google Sheets
      const payload = {
        playerName,
        correctCount,
        totalQuestions: quizData.length,
        totalWrongGuesses,
        timeTaken: Math.floor((Date.now() - startTime) / 1000),
        answers
      };

      fetch("https://script.google.com/macros/s/AKfycbxbhU5DYJy-AkaZj_tN1CkB0zdh8tmaPoofwva_BbVIkY_UOvf-oLmyLb066qP4_5N1Bg/exec", {
        method: "POST",
        mode: "no-cors",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify(payload)
      }).catch(err => console.error("Error sending to Sheets:", err));

      document.getElementById('question').innerText = 'üéâ Quiz Completed!';
      document.getElementById('options').innerHTML = '';
      document.getElementById('progressTracker').innerText = '';
      document.getElementById('scoreCard').innerHTML = `
        <p>üë§ Player: ${playerName}</p>
        <p>‚úÖ Correct Answers: ${correctCount} / ${quizData.length}</p>
        <p>‚ùå Wrong Attempts: ${totalWrongGuesses}</p>
        <p>‚è±Ô∏è Time Taken: ${Math.floor((Date.now() - startTime) / 1000)} seconds</p>
      `;
      document.getElementById('restartBtn').style.display = 'inline-block';
    }

    function startTimer() {
      timerInterval = setInterval(() => {
        document.getElementById('timer').innerText = `‚è≥ Time: ${Math.floor((Date.now() - startTime) / 1000)}s`;
      }, 1000);
    }

    document.getElementById('restartBtn').onclick = () => {
      document.getElementById('quizContent').style.display = 'none';
      document.getElementById('nameForm').style.display = 'flex';
      document.getElementById('nameInput').value = '';
      if (player) { try { player.destroy(); } catch(e){} }
    };
  </script>
</body>
</html>

